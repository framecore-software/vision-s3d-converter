# ─────────────────────────────────────────────
# RabbitMQ
# ─────────────────────────────────────────────
RABBITMQ_USER=vision_s3d
RABBITMQ_PASS=change_me_in_production
# La URL se construye automáticamente en docker-compose a partir de las variables
# anteriores. Si usas una instancia externa, sobreescribe directamente:
# RABBITMQ_URL=amqp://vision_s3d:change_me@rabbitmq:5672/

# ─────────────────────────────────────────────
# Redis
# ─────────────────────────────────────────────
# URL completa de conexión. En docker-compose apunta al servicio "redis".
# Para instancia externa: redis://:password@host:6379/0
REDIS_URL=redis://redis:6379
REDIS_MAXMEMORY=4gb

# ─────────────────────────────────────────────
# Cloudflare R2 (compatible S3)
# Obtén estas credenciales en: R2 → Manage API tokens
# El ACCOUNT_ID lo encuentras en el dashboard de Cloudflare → R2 Overview.
# ─────────────────────────────────────────────
R2_ENDPOINT=https://0a1b2c3d4e5f6a7b8c9d0e1f.r2.cloudflarestorage.com
R2_ACCESS_KEY=your_r2_access_key_id
R2_SECRET_KEY=your_r2_secret_access_key
R2_BUCKET=vision-s3d-files

# ─────────────────────────────────────────────
# Scheduler de recursos
# MAX_CPU_PERCENT y MAX_RAM_PERCENT: target de utilización del servidor
# El scheduler no asignará nuevas tareas si se supera este umbral
# ─────────────────────────────────────────────
MAX_CPU_PERCENT=85
MAX_RAM_PERCENT=85
SCHEDULER_CYCLE_SECONDS=2

# ─────────────────────────────────────────────
# Almacenamiento temporal
# Montar en un disco rápido con suficiente espacio (mínimo 200GB recomendado)
# Un archivo LAS de 50M puntos puede expandirse a 20GB al descomprimir
# ─────────────────────────────────────────────
HOST_TMP_DIR=/tmp/vs3d_processing

# ─────────────────────────────────────────────
# Servidor SSE de progreso
# ─────────────────────────────────────────────
SSE_PORT=8080
# Para múltiples dominios separar con comas:
# ALLOWED_ORIGINS=https://app.tudominio.com,https://admin.tudominio.com
ALLOWED_ORIGINS=https://app.tudominio.com

# ─────────────────────────────────────────────
# Logging
# Valores: DEBUG, INFO, WARNING, ERROR
# ─────────────────────────────────────────────
LOG_LEVEL=INFO
